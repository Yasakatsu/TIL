Laravelでリクエストを処理する時には下記のような流れになります。

実際に処理を書いていく方が理解がしやすいので、ここでは難しく考えなくても大丈夫です。

全体的にこういうイメージで動くんだな、くらいの感覚で読んでください。

まだ未作成ですが、メモ投稿画面を表示する流れを記載しています。

今回はブラウザからhttp://localhost:8085/memo

にアクセスがあって、ログインしていた場合に画面表示するパターンで説明します。

![image](https://user-images.githubusercontent.com/99887597/223463851-2eba7966-8804-4bc5-aa99-9a90a4e3bbf3.png)

1. 初期処理
ブラウザからメモ投稿画面を表示するリクエストがあると、初期処理が動きます。

初期処理ではLaravelで必要な機能を読み込んだりしています。

その後にURLルーティングが動きます。

2. URLルーティング
フレームワークの初期処理が終わったら、URLルーティングに入ってきて、どのアクセスがあったか判定し、必要な処理を呼び出します。

URLルーティングは、「このURLにアクセスされたら、この処理をする」という感じで、URLにアクセスした時に処理先を紐付けることです。

例として、web.phpに下記のように書かれているとします。

```php 
Route::get('/memo', 'MemoController@index')->name('memo.index');
```
これはブラウザから/memoにアクセスされたら、Memoコントローラーのindexメソッドを実行するという意味になります。

3. コントローラーにアクセス
URLルーティングで、MemoContoller@indexと書いているので、MemoControllerのindexメソッドを呼び出します。

メソッド内部では下記のデータ取得処理(4・5)を行った後に、bladeへ取得したデータを渡して(6)、レスポンスとしてユーザーに返します。

4. モデルにアクセス
ControllerからMemoモデルにアクセスして、データベースからメモ一覧のデータを取得するようにします。

5. テーブルからデータ取得
Memoモデルと紐づいているmemosテーブルからメモ一覧データを取得して、コントローラーに返します。

6. ビューにデータを渡す
Memoモデルから取得した値をmemo.blade.phpに渡します。

7. ブラウザにレスポンスを返す。
ブラウザにviewをレスポンスとして返して処理終了です。

処理の流れについてのまとめ
基本的には、全体の流れはこのようになります。

モデルやコントローラー・ビューと言った単語が説明の中に出てきましたが、これはMVCのことです。

LaravelもMVCのような形で動きます。

MVCとは(Model View Controller)の略で、それぞれ役割にあったプログラムを書くことで、処理を整理して効率的に動かすことができるような仕組みのことです。

PHPバージョンでは、index.phpがviewのような形で、action配下をcontrollerのように扱っていました。

modelは存在せずに、それぞれがデータベースにSQLを発行して処理を取りに行くような形でした。

Laravelでの、MVCの役割をしているファイルの配置場所ですが、下記のようになります。

Modelはapp/Modelsの配下に配置されます。
View(bladeファイル)はresources/viewsの配下に配置されます。
Controllerはapp/Http/Controllersの配下に配置されます。
図で示したように、ControllerからModelを使って、取得や追加・更新などを行って、Viewを返すのが一般的な流れです。

Controllerなしでも、Viewだけを返すこともできますし、データが必要なければModelなしで、ControllerとViewだけで処理を構成することもあります。
