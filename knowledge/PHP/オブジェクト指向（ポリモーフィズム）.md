# ポリモーフィズム（多態性）

オブジェクト指向的考えに基づく、大きなメリットとして挙げられる１つ

**異なった動きを、同じ動作で実現する考え**

例として、phpの場合、**クラスは異なっても、同じ名前のメソッドで色々な動きを実現させる事**をいう

ポリモーフィズムの考えで実装する場合、抽象クラスの使用や、**インターフェース**の使用が絡んでくる。

## 例えば、こんなシチュエーション・・・

ダメージを受けた際の、鳴き声の実装の様子（呼ばれる側）
### Humanクラス
```php
setCry()
{
  switch($this->sex)
  {
  case Sex::MAN:
  History::set('ぐはぁっ！')
  break;
  case Sex::WOMAN:
  History::set('きゃっ！')
  break;
  case Sex::OKAMA:
  History::set('いやぁぁんっ！！')
  break;
  }
}
```

Humanクラスを使う側（呼ぶ側）
### Monsterクラス
```php$
attack($obj){
$obj->setCry();
}


```

呼ぶ側（Monsterクラス）は、呼ばれる側（Humanクラス）のsetCryメソッドを実行するだけだが、

呼ばれる側（Humanクラス）のメソッド内では、「女だったら・・・男だった。。。」と
、別々の処理を行っている。

この流れを、**ポリモーフィズム**という。

## 使用用途
複数人で実装している際に、抽象クラスや、インターフェースを使って、メンバメソッドの実装を強制化させる事により、

エラーを起こして、すぐに問題点を気づいて貰いやすくなる。

例えば
```php
interface　クラス名
{
public function メソッド名１();
public function メソッド名２();
}
```
とあった場合、それを見た人は、「あー、メソッドの中身はわからないけど、これを、継承先で実装しないと、エラーになるな。」

と、強制的に実装しないといけない事に、気づいてもらえる。

実際、抽象クラスもしくはインターフェースの使い所としては、

複数のクラスの中で、共通しているメンバを切り出し、

それぞれ、抽象クラス化、もしくはインターフェースとして、共通化してあげるとGood

ポリモーフィズムは難しく考えがちですが、単に

「メソッド名を統一しよう」というだけになります。

細かくは、「呼び出す側の人は、相手が違っていても同じメソッド名を呼ぶだけで、呼び出された側が全く違った処理を行える」

というものになります。

例えば、ゲームの例で言えば

・魔法使いクラス

・剣士クラス

・格闘家クラス

といったクラスを作った場合、それぞれ攻撃のメソッド名を攻撃の内容に応じて名前をつけてしまうと

・strike（魔法使いが杖で叩く）

・slash（剣士が切る）

・punch（格闘家がパンチする）

というようにそれぞれ攻撃をするメソッド名が異なる事になります。

そうなった場合、攻撃を呼び出したいクラスではそれぞれのクラスが

魔法使いクラスならstrikeメソッドを呼ぶ

剣士クラスならslashメソッドを呼ぶ

という処理を書かなくてはいけなくなります。

そうしたクラス設計をしてしまうと

魔導師クラスなり新たなジョブのクラスが追加される度にコードの修正が必要

という事が起こります。

大規模な現場になればなるほどコード同士が影響し合っている可能性が高く、ちょっとのコードの修正が大きな影響となり思わぬところで不具合を生んでしまったり、

ちょっとのコード修正のつもりが、更に別のコードも修正する必要があり、

更にそのコードを修正した場合にはまた別のコードも修正が必要でー、と修正範囲が大きくなりその分人件費コストも大きくなる事になります。

そこで誕生したのがポリモーフィズムという考え方で、

同じメソッド名で統一出来るなら統一したほうが後々修正が少なくていいよね。

というものなのです。こうする事で、attackといったようなメソッド名に統一をすれば、

新たなジョブのクラスが増えても常にメソッド呼び出し側は攻撃であれば相手のクラスが何であれattackメソッドを呼び出すだけ。とシンプルになり、

後々のコード修正も必要なくなります。こうする事で、同じメソッド名を呼び出しながらも、

呼び出された側では各種の違った攻撃手法を行う事が出来るというのがポリモーフィズムと呼ばれる考え方になります。

